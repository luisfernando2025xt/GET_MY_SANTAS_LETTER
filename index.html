<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Mystery Box 2025 - Premium</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700;800&family=Playfair+Display:wght@600;700&display=swap" rel="stylesheet">

<style>
  :root{
    --bg:#070607;
    --gold:#f0c84b;
    --muted:#bdbdbd;
    --glass: rgba(255,255,255,0.03);
  }

  body{margin:0;background:var(--bg);color:#fff;font-family:"Poppins",Arial,sans-serif}
  a{color:inherit;text-decoration:none}

  .wrap{max-width:1300px;margin:28px auto;padding:28px;display:flex;flex-direction:column;align-items:center;gap:84px}
  h1{font-family:"Playfair Display",serif;font-weight:700;font-size:72px;color:var(--gold);text-shadow:0 6px 24px rgba(240,200,75,0.08)}
  .instructions{max-width:980px;text-align:center;padding:34px;border-radius:18px;border:1px solid rgba(240,200,75,0.06);font-size:20px;color:#e9e6e0}

  .main-boxes{display:flex;justify-content:center;align-items:center}
  .box-container{position:relative;width:190px;height:190px;display:flex;align-items:center;justify-content:center}
  .main-box{width:100%;height:100%;border-radius:16px;border:3px solid rgba(240,200,75,0.95);background: linear-gradient(145deg,#2a2a2a,#151515);display:flex;align-items:center;justify-content:center;color:var(--gold);font-weight:700;font-size:26px;cursor:pointer}

  .modal{display:none;position:fixed;inset:0;z-index:9999;background:linear-gradient(180deg, rgba(0,0,0,0.72), rgba(0,0,0,0.82));backdrop-filter: blur(6px);align-items:center;justify-content:center;padding:28px}
  .modal.show{display:flex}
  .viewer{width:100%;max-width:1180px;height:84vh;background:#111;border-radius:16px;overflow:hidden;display:flex;flex-direction:column}
  .viewer-header{display:flex;align-items:center;justify-content:space-between;padding:18px 22px;background:linear-gradient(90deg,#0f0f0f, #141414)}
  .viewer-title{font-family:"Playfair Display",serif;font-size:20px;color:var(--gold);font-weight:700}
  .viewer-controls{display:flex;gap:10px;align-items:center}
  .open-new{background:var(--glass);padding:8px 12px;border-radius:10px;color:var(--gold);border:1px solid rgba(255,255,255,0.03)}
  .close-btn{cursor:pointer;font-size:22px;color:var(--gold);padding:8px 12px;border-radius:10px;border:1px solid rgba(255,255,255,0.02);background:transparent}
  .viewer-body{flex:1;display:flex;align-items:center;justify-content:center;padding:12px}
  .viewer-body iframe{width:100%;height:100%;border:0;background:#000}
  .viewer-footer{padding:12px 18px;color:var(--muted);font-size:14px;border-top:1px solid rgba(255,255,255,0.02);display:flex;justify-content:space-between;align-items:center}
</style>
</head>
<body>
<div class="wrap">
  <h1>Mystery Box 2025</h1>
  <div class="instructions">
    Use a device in dark mode with 100% brightness. Be in a completely dark or very dim room. Any other setting will ruin the experience.
  </div>

  <div class="main-boxes">
    <div class="box-container">
      <div class="main-box" id="box5">Box 5</div>
    </div>
  </div>
</div>

<div id="modal" class="modal" aria-hidden="true">
  <div class="viewer">
    <div class="viewer-header">
      <div class="viewer-title" id="viewerTitle">Contenido</div>
      <div class="viewer-controls">
        <a id="viewerOpenNew" class="open-new" href="#" target="_blank" style="display:none">Abrir en nueva pestaña</a>
        <button id="closeBtn" class="close-btn">✕</button>
      </div>
    </div>
    <div class="viewer-body" id="viewerBody"></div>
    <div class="viewer-footer" id="viewerFooter"></div>
  </div>
</div>

<script>
const box5 = document.getElementById('box5');
const modal = document.getElementById('modal');
const viewerBody = document.getElementById('viewerBody');
const viewerTitle = document.getElementById('viewerTitle');
const viewerFooter = document.getElementById('viewerFooter');
const viewerOpenNew = document.getElementById('viewerOpenNew');
const closeBtn = document.getElementById('closeBtn');

const box5Link = "https://luisfernando2025xt.github.io/xmas-mystery-box/";
const box5Codes = ["ABC123","XYZ789","LMN456","PL55MN88","QW11ER22","GH12JK34","RT56UV78","YZ90AB12","CD34EF56","MN78OP90"];

function getRandomCode(){
  const key = 'box5ChosenCode';
  let code = localStorage.getItem(key);
  if(!code){
    code = box5Codes[Math.floor(Math.random()*box5Codes.length)];
    localStorage.setItem(key, code);
  }
  return code;
}

box5.addEventListener('click', ()=>{
  const code = getRandomCode();
  openViewer({title:"Box 5 - Código de acceso", url: box5Link, code});
});

function openViewer({title,url,code=null}){
  viewerTitle.textContent = title;
  viewerFooter.textContent = code ? `Código revelado: ${code}` : '';
  viewerOpenNew.style.display = 'inline-block';
  viewerOpenNew.href = url;
  viewerBody.innerHTML = `<iframe src="${url}" allow="autoplay; fullscreen" loading="lazy"></iframe>`;
  modal.classList.add('show');
  modal.setAttribute('aria-hidden','false');
}

closeBtn.addEventListener('click', ()=>{
  modal.classList.remove('show');
  viewerBody.innerHTML = '';
  modal.setAttribute('aria-hidden','true');
});

modal.addEventListener('click', (ev)=>{
  if(ev.target === modal){
    modal.classList.remove('show');
    viewerBody.innerHTML = '';
    modal.setAttribute('aria-hidden','true');
  }
});
</script>
</body>
</html>
